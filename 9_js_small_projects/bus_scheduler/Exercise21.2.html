<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Springfield Public Transport</title>

    <style>
        body {font-family: Arial, Helvetica, sans-serif;
        text-align: center;}

        h2 {
            text-decoration: underline;
            margin-bottom: 15px;
        }

        h3 {
            margin-bottom: 0px;
            padding: 0px 10px;
        }

        h4 {margin-top: 0px;}

        h5 {
            font-weight:400;
            margin: 15px 5px;
        }

        .caption {
            font-size: 1.4em;
        }

        #errorDisplay {
            color: red;
            margin-bottom: 10px;
            display: none;
        }

        #successDisplay {
            color:darkcyan;
            margin-bottom: 10px;
            display: none;
        }

        #passengerTracker {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
        }

        #listOutput {
            display: none;
            margin-top: 10px;
            text-align: left;
            margin-bottom: 30px;
        }

        #add, #remove, #listPass, #listVeh {
            border: 1px solid black;
            width: 350px;
            padding-bottom: 5px;
            margin: 10px auto;
            
        }

        input {
            font-size: 1.125em;
            margin: 5px 0px;
            width: 225px;
            border: 1px solid grey;
        }

        #busTable, #trainTable, #subwayTable, #tramTable {
            overflow-x:scroll;
        }

        table {
            margin: auto;
            border: 1px solid black;
            font-size: 1.25em;
        }

        button {
            width: 75%;
            margin: 10px 0px;
            font-size: 1.125em;
        }

        #btnAdd, #btnRemove {
            width: 90%;
        }

        #addTable, #removeTable {
            width: 100%;
            border: none;
        }

        .addRow, .removeRow {
            border: none;
            text-align: right;
        }

        #addTitle, #removeTitle, #listPassTitle, #listVehTitle {
            border: 2px solid black;
            border-radius: 10px;
            font-size: 1.25em;
            margin: 0px 20px;
            margin-top: 5px;
        }

        #listPassTitle, #listVehTitle {
            margin-bottom: 7px;
        }

        #vehTitle {
            font-size: 1.25em;
            margin-bottom: 10px;
            border: none;
        }

        #first {margin-top: 10px;}

        th {border: 2px solid black;}
        
        td {
            border: 1px solid black;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Welcome To Springfield Metro Transit</h1>
    <h3>We are currently operating: 5 bus lines, 2 train lines, 3 subway lines, and 3 tram lines (2 daytime and 1 night). Please note that each transit line runs in both directions, and will be marked accordingly with an A/B designation.</h3>

    <h2>Passenger Tracker</h2>
    <div id="errorDisplay"></div><div id="successDisplay"></div>
    <div id="passengerTracker">
        <div id="add">
            <h4 id="addTitle">Add Passenger</h4>
            <table id="addTable">
                <tr>
                    <td class="addRow"><label for="addName">Name</label></td>
                    <td class="addRow"><input type="text" id="addName"></td>
                </tr>
                <tr>
                    <td class="addRow"><label for="addAge">Age</label></td>
                    <td class="addRow"><input type="text" id="addAge"></td>
                </tr>
                <tr>
                    <td class="addRow"><label for="addDestination">Destination</label></td>
                    <td class="addRow"><input type="text" id="addDestination"></td>
                </tr>
            </table>
            <button id="btnAdd">Add</button>
        </div>
        <div id="remove">
            <h4 id="removeTitle">Remove Passenger</h4>
            <table id="removeTable">
                <tr>
                    <td class="removeRow"><label for="removeName">Name</label></td>
                    <td class="removeRow"><input type="text" id="removeName"></td>
                </tr>
                <tr>
                    <td class="removeRow"><label for="removeAge">Age</label></td>
                    <td class="removeRow"><input type="text" id="removeAge"></td>
                </tr>
                <tr>
                    <td class="removeRow"><label for="removeDestination">Destination</label></td>
                    <td class="removeRow"><input type="text" id="removeDestination"></td>
                </tr>
            </table>
            <button id="btnRemove">Remove</button>
        </div>
        <div id="listPass">
            <h4 id="listPassTitle">List Passengers</h4>
            <label for="btnListPass">There is currently information<br/>for <output id="passTotal">0</output> passengers logged.</label><br/>
            <button id="btnListPass">Generate List</button>
        </div>
        <div id="listVeh">
            <h4 id="listVehTitle">List Vehicles</h4>
            <label for="btnListVeh">There is currently information<br/> for 26 vehicles logged.</label><br/>
            <button id="btnListVeh">Generate List</button>
        </div>
    </div>
    <div id="listOutput"></div>
    <h2>Route List</h2>
    <div id="routeInfo">
        <h3 class="caption">Buses</h3>
        <div id="busTable">
            <table id="busOutput">
                <thead>
                <tr>
                    <th>Line #</th>
                    <th>Capacity</th>
                    <th>Route</th>
                    <th>A-Route</th>
                    <th>B-Route</th>
                    <th>Zone</th>
                </tr>
                </thead>
            </table>
        </div>
        <h4>(Note: fares on central bus lines contain an additonal $0.50 charge)</h4>
        <h3 class="caption">Trains</h3>
        <div id="trainTable">
        <table id="trainOutput">
                <thead>
                <tr>
                    <th>Line #</th>
                    <th>Capacity</th>
                    <th>Route</th>
                    <th>A-Route</th>
                    <th>A-Route</th>
                    <th>Local/Intercity</th>
                </tr>
                </thead>
            </table>
        </div>
        <h3 class="caption">Subways</h3>
        <div id="subwayTable">
            <table id="subwayOutput">
                <thead>
                <tr>
                    <th>Line #</th>
                    <th>Capacity</th>
                    <th>Route</th>
                    <th>A-Route</th>
                    <th>B-Route</th>
                    <th>Line Color</th>
                </tr>
                </thead>
            </table>
        </div>
        <h3 class="caption">Trams</h3>
        <div id="tramTable">
            <table id="tramOutput">
                <thead>
                <tr>
                    <th>Line #</th>
                    <th>Capacity</th>
                    <th>Route</th>
                    <th>A-Route</th>
                    <th>B-Route</th>
                    <th>Day/Night</th>
                </tr>
                </thead>
            </table>
        </div>
        <h4>(Note: night trams run at half the frequency of day trams)</h4>
    </div>
    <script>
        let passCount = 0;
        let passList = [];
        let errorDisplay = document.getElementById('errorDisplay');
        let successDisplay = document.getElementById('successDisplay');
        let listOutput = document.getElementById('listOutput');
        let busOutput = document.getElementById('busOutput');
        let trainOutput = document.getElementById('trainOutput');
        let subwayOutput = document.getElementById('subwayOutput');
        let tramOutput = document.getElementById('tramOutput');

        let Vehicle = class{
            constructor (number, capacity, route, type){
                this.number = number;
                this.capacity = capacity;
                this.route = route;
                this.type = type;
            }
            display(){
                console.log(`${type} ${number} created.`)
            };
        };

        class Bus extends Vehicle {
            constructor (number, capacity, route, type, direction, zone){
                super(number, capacity, route, type);
                this.direction = direction;
                this.zone = zone;
            }
            display(){
                if(this.number.endsWith("a")){
                    let newRow = document.createElement('tr');
                    busOutput.appendChild(newRow);
                    let numberCol = document.createElement('td');
                    let numberText = document.createTextNode(this.number.slice(0,-1));
                    numberCol.appendChild(numberText);
                    
                    let capacityCol = document.createElement('td');
                    let capacityText = document.createTextNode(this.capacity);
                    capacityCol.appendChild(capacityText);

                    let routeCol = document.createElement('td');
                    let routeText = document.createTextNode(this.route);
                    routeCol.appendChild(routeText);

                    let directionCol = document.createElement('td');
                    let directionText = document.createTextNode(this.direction);
                    directionCol.appendChild(directionText);

                    let returnCol = document.createElement('td');
                    let returnText = document.createTextNode(this.direction);
                    returnCol.setAttribute('id', 'returnBus' + this.number.slice(0,-1));
                    returnCol.appendChild(returnText);

                    let zoneCol = document.createElement('td');
                    let zoneText = document.createTextNode(this.zone);
                    zoneCol.appendChild(zoneText);

                    newRow.appendChild(numberCol);
                    newRow.appendChild(capacityCol);
                    newRow.appendChild(routeCol);
                    newRow.appendChild(directionCol);
                    newRow.appendChild(returnCol);
                    newRow.appendChild(zoneCol);


                } else if(this.number.endsWith("b")){
                    document.getElementById(`returnBus${this.number.slice(0,-1)}`).innerHTML = this.direction;

                }
                console.log(busOutput);
            };

            altDisplay(){
                let output = "<b>" + this.type + " " + this.number + "</b> holds <em>" + this.capacity + "</em> people, and travels <em>" + this.direction + "</em> on the <em>" + this.route + "</em> route in the <em>" + this.zone + "</em> zone.";
                return output;
            };
        };

        class Train extends Vehicle {
            constructor (number, capacity, route, type, direction, locality){
                super(number, capacity, route, type);
                this.direction = direction;
                this.locality = locality;
            }
            display(){
                if(this.number.endsWith("a")){
                    let newRow = document.createElement('tr');
                    trainOutput.appendChild(newRow);
                    let numberCol = document.createElement('td');
                    let numberText = document.createTextNode(this.number.slice(0,-1));
                    numberCol.appendChild(numberText);
                    
                    let capacityCol = document.createElement('td');
                    let capacityText = document.createTextNode(this.capacity);
                    capacityCol.appendChild(capacityText);

                    let routeCol = document.createElement('td');
                    let routeText = document.createTextNode(this.route);
                    routeCol.appendChild(routeText);

                    let directionCol = document.createElement('td');
                    let directionText = document.createTextNode(this.direction);
                    directionCol.appendChild(directionText);

                    let returnCol = document.createElement('td');
                    let returnText = document.createTextNode(this.direction);
                    returnCol.setAttribute('id', 'returnTrain' + this.number.slice(0,-1));
                    returnCol.appendChild(returnText);

                    let localityCol = document.createElement('td');
                    let localityText = document.createTextNode(this.locality);
                    localityCol.appendChild(localityText);

                    newRow.appendChild(numberCol);
                    newRow.appendChild(capacityCol);
                    newRow.appendChild(routeCol);
                    newRow.appendChild(directionCol);
                    newRow.appendChild(returnCol);
                    newRow.appendChild(localityCol);


                } else if(this.number.endsWith("b")){
                    document.getElementById(`returnTrain${this.number.slice(0,-1)}`).innerHTML = this.direction;

                }
                console.log(trainOutput);
            };

            altDisplay(){
                let output = "<b>" + this.type + " " + this.number + "</b> holds <em>" + this.capacity + "</em> people, and travels <em>" + this.direction + "</em> on the <em>" + this.route + "</em> route. It is part of the <em>" + this.locality + "</em> train system.";
                return output;
            };
        };

        class Subway extends Vehicle {
            constructor (number, capacity, route, type, direction, color){
                super(number, capacity, route, type);
                this.direction = direction;
                this.color = color;
                
            }
            display(){
                if(this.number.endsWith("a")){
                    let newRow = document.createElement('tr');
                    subwayOutput.appendChild(newRow);
                    let numberCol = document.createElement('td');
                    let numberText = document.createTextNode(this.number.slice(0,-1));
                    numberCol.appendChild(numberText);
                    
                    let capacityCol = document.createElement('td');
                    let capacityText = document.createTextNode(this.capacity);
                    capacityCol.appendChild(capacityText);

                    let routeCol = document.createElement('td');
                    let routeText = document.createTextNode(this.route);
                    routeCol.appendChild(routeText);

                    let directionCol = document.createElement('td');
                    let directionText = document.createTextNode(this.direction);
                    directionCol.appendChild(directionText);

                    let returnCol = document.createElement('td');
                    let returnText = document.createTextNode(this.direction);
                    returnCol.setAttribute('id', 'returnSubway' + this.number.slice(0,-1));
                    returnCol.appendChild(returnText);

                    let colorCol = document.createElement('td');
                    let colorText = document.createTextNode(this.color);
                    colorCol.appendChild(colorText);

                    newRow.appendChild(numberCol);
                    newRow.appendChild(capacityCol);
                    newRow.appendChild(routeCol);
                    newRow.appendChild(directionCol);
                    newRow.appendChild(returnCol);
                    newRow.appendChild(colorCol);


                } else if(this.number.endsWith("b")){
                    document.getElementById(`returnSubway${this.number.slice(0,-1)}`).innerHTML = this.direction;

                }
                console.log(subwayOutput);
            };

            altDisplay(){
                let output = "<b>" + this.type + " " + this.number + "</b> holds <em>" + this.capacity + "</em> people, and travels <em>" + this.direction + "</em> on the <em>" + this.route + "</em> route, also known as the <em>" + this.color + "</em> line.";
                return output;
            };
        };

        class Tram extends Vehicle {
            constructor (number, capacity, route, type, direction, time){
                super(number, capacity, route, type);
                this.direction = direction;
                this.time = time;
            }
            display(){
                if(this.number.endsWith("a")){
                    let newRow = document.createElement('tr');
                    tramOutput.appendChild(newRow);
                    let numberCol = document.createElement('td');
                    let numberText = document.createTextNode(this.number.slice(0,-1));
                    numberCol.appendChild(numberText);
                    
                    let capacityCol = document.createElement('td');
                    let capacityText = document.createTextNode(this.capacity);
                    capacityCol.appendChild(capacityText);

                    let routeCol = document.createElement('td');
                    let routeText = document.createTextNode(this.route);
                    routeCol.appendChild(routeText);

                    let directionCol = document.createElement('td');
                    let directionText = document.createTextNode(this.direction);
                    directionCol.appendChild(directionText);

                    let returnCol = document.createElement('td');
                    let returnText = document.createTextNode(this.direction);
                    returnCol.setAttribute('id', 'returnTram' + this.number.slice(0,-1));
                    returnCol.appendChild(returnText);

                    let timeCol = document.createElement('td');
                    let timeText = document.createTextNode(this.time);
                    timeCol.appendChild(timeText);

                    newRow.appendChild(numberCol);
                    newRow.appendChild(capacityCol);
                    newRow.appendChild(routeCol);
                    newRow.appendChild(directionCol);
                    newRow.appendChild(returnCol);
                    newRow.appendChild(timeCol);


                } else if(this.number.endsWith("b")){
                    document.getElementById(`returnTram${this.number.slice(0,-1)}`).innerHTML = this.direction;

                }
                console.log(tramOutput);
            };

            altDisplay(){
                let output = "<b>" + this.type + " " + this.number + "</b> holds <em>" + this.capacity + "</em> people, and travels <em>" + this.direction + "</em> on the <em>" + this.route + "</em> route only during the <em>" + this.time + "</em>.";
                return output;
            };
        };

        let Passenger = class{
            constructor(name, age, destination, onVehicle){
                this.name = name;
                this.age = age;
                this.destination = destination;
                this.onVehicle = onVehicle;
            }

            display(){
                passList.push(this);
                console.log(passList);
            }
        };

        let bus1a = new Bus("1a", "75", "City-Center", "Bus","Clockwise", "Central");
        let bus1b = new Bus("1b", "75", "City-Center", "Bus", "Counter-Clockwise", "Central");
        let bus2a = new Bus("2a", "75", "Inner-Downtown", "Bus", "Clockwise", "Central");
        let bus2b = new Bus("2b", "75", "Inner-Downtown", "Bus", "Counter-Clockwise", "Central");
        let bus3a = new Bus("3a", "75", "Outer-Downtown", "Bus", "Clockwise", "Central");
        let bus3b = new Bus("3b", "75", "Outer-Downtown", "Bus", "Counter-Clockwise", "Central");
        let bus4a = new Bus("4a", "75", "Southern-Suburbs", "Bus", "Southbound", "Suburban");
        let bus4b = new Bus("4b", "75", "Southern-Suburbs", "Bus", "Northbound", "Suburban");
        let bus5a = new Bus("5a", "75", "Northern-Suburbs", "Bus", "Northbound", "Suburban");
        let bus5b = new Bus("5b", "75", "Northern-Suburbs", "Bus", "Southbound", "Suburban");
        bus1a.display();
        bus1b.display();
        bus2a.display();
        bus2b.display();
        bus3a.display();
        bus3b.display();
        bus4a.display();
        bus4b.display();
        bus5a.display();
        bus5b.display();

        let train1a = new Train("1a", "1000", "Commuter", "Train", "Inbound", "Local");
        let train1b = new Train("1b", "1000", "Commuter", "Train", "Outbound", "Local");
        let train2a = new Train("2a", "500", "Intercity", "Train", "Inbound", "Statewide");
        let train2b = new Train("2b", "500", "Intercity", "Train", "Outbound", "Statewide");
        train1a.display();
        train1b.display();
        train2a.display();
        train2b.display();

        let subway1a = new Subway("1a", "800", "City-Center Loop", "Subway", "Clockwise", "Yellow");
        let subway1b = new Subway("1b", "800", "City-Center Loop", "Subway", "Counter-Clockwise", "Yellow");
        let subway2a = new Subway("2a", "800", "City-Center - Hospital", "Subway","Southbound", "Green");
        let subway2b = new Subway("2b", "800", "City-Center - Hospital", "Subway","Northbound", "Green");
        let subway3a = new Subway("3a", "800", "City-Center - Airport", "Subway", "Westbound", "Red");
        let subway3b = new Subway("3b", "800", "City-Center - Airport", "Subway", "Eastbound", "Red");
        subway1a.display();
        subway1b.display();
        subway2a.display();
        subway2b.display();
        subway3a.display();
        subway3b.display();


        let tram1a = new Tram("1a", "50", "Waterfront", "Tram", "Eastbound", "Day");
        let tram1b = new Tram("1b", "50", "Waterfront", "Tram", "Westbound", "Day");
        let tram2a = new Tram("2a", "50", "Funicular", "Tram", "Uphill", "Day");
        let tram2b = new Tram("2b", "50", "Funicular", "Tram", "Downhill", "Day");
        let tram3a = new Tram("3a", "50", "Funicular", "Tram", "Uphill", "Night");
        let tram3b = new Tram("3b", "50", "Funicular", "Tram", "Downhill", "Night");
        tram1a.display();
        tram1b.display();
        tram2a.display();
        tram2b.display();
        tram3a.display();
        tram3b.display();


        document.getElementById('btnAdd').addEventListener('click', () =>{
            successDisplay.innerHTML = "";
            successDisplay.style.display = "none";
            let addPassName = document.getElementById('addName').value;
            let addPassAge = document.getElementById('addAge').value;
            let addPassDest = document.getElementById('addDestination').value;
            let passAdded = "yes";
            if(addPassName !== "" && addPassAge !== "" && addPassDest !== ""){
                for (x = 0; x < passList.length; x++){
                    if(passList[x].name == addPassName && passList[x].age == addPassAge && passList[x].destination == addPassDest){
                        errorDisplay.innerHTML = "Error: Passenger already exists";
                        errorDisplay.style.display = "block";
                        passAdded = "no";
                    };   
                };
                if(passAdded == "yes"){
                    errorDisplay.innerHTML = "";
                    errorDisplay.style.display = "none";
                    successDisplay.innerHTML = "Passenger added";
                    successDisplay.style.display = "block";
                    passCount++;
                    document.getElementById('passTotal').innerHTML = passCount;

                    let newPass = new Passenger (addPassName, addPassAge, addPassDest, "yes");
                    console.log(newPass);
                    newPass.display();
                    document.getElementById('addName').value = "";
                    document.getElementById('addAge').value = "";
                    document.getElementById('addDestination').value = "";
                };
            } else {
                errorDisplay.innerHTML = "Error: Invalid input, passenger not added<br/>";
                errorDisplay.style.display = "block";
                passAdded = "no";
                if (addPassName == ""){
                errorDisplay.innerHTML += "Please enter a name for the passenger<br/>";
                };
                if (addPassAge == ""){
                errorDisplay.innerHTML += "Please enter an age for the passenger<br/>";
                };
                if (addPassDest == ""){
                errorDisplay.innerHTML += "Please enter a destination for the passenger";
                };
            };
        });

        document.getElementById('btnRemove').addEventListener('click', () =>{
            let removePassName = document.getElementById('removeName').value;
            let removePassAge = document.getElementById('removeAge').value;
            let removePassDest = document.getElementById('removeDestination').value;
            successDisplay.innerHTML = "";
            successDisplay.style.display = "none";

            if(removePassName !== "" && removePassAge !== "" && removePassDest !== ""){
                errorDisplay.innerHTML = "";
                errorDisplay.style.display = "none";
                let passRemoved = "no";
                for(x = 0; x < passList.length; x++){
                    if(passList[x].name == removePassName && passList[x].age == removePassAge && passList[x].destination == removePassDest){
                        passList.splice(x, 1);
                        passCount--;
                        document.getElementById('passTotal').innerHTML = passCount;
                        passRemoved = "yes";
                        successDisplay.innerHTML = "Passenger removed";
                        successDisplay.style.display = "block";
                        console.log(passList);
                        document.getElementById('removeName').value = "";
                        document.getElementById('removeAge').value = "";
                        document.getElementById('removeDestination').value = "";
                    }
                };
                if(passRemoved == "no"){
                    errorDisplay.innerHTML = "Error: Passenger not found, please check input against passenger list";
                    errorDisplay.style.display = "block";
                };
            } else {
                errorDisplay.innerHTML = "Error: Invalid input<br/>";
                errorDisplay.style.display = "block";
                if (removePassName == ""){
                errorDisplay.innerHTML += "Please enter a name for the passenger<br/>";
                };
                if (removePassAge == ""){
                errorDisplay.innerHTML += "Please enter an age for the passenger<br/>";
                };
                if (removePassDest == ""){
                errorDisplay.innerHTML += "Please enter a destination for the passenger";
                };
            };

            
        });

        document.getElementById('btnListPass').addEventListener('click', () =>{
            listOutput.innerHTML = "";
            listOutput.style.display = "block";
            listOutput.innerHTML += `<h4 id="vehTitle">Current Passengers:</h4>`;
            for(x = 0; x < passList.length; x++){
                listOutput.innerHTML += "<h5>Passenger " + (x+1) + ": " + passList[x].name + ", Age: " + passList[x].age + ", Destination: " + passList[x].destination + "</h5>";
            };
        });

        document.getElementById('btnListVeh').addEventListener('click', () =>{
            listOutput.innerHTML = "";
            listOutput.style.display = "block";
            listOutput.innerHTML += `<h4 id="vehTitle">Current Vehicles:</h4>`;

            listOutput.innerHTML += `<h5 id="first">` + bus1a.altDisplay() + "</h5>" + "<h5>" + bus1b.altDisplay() + "</h5>" + "<h5>" + bus2a.altDisplay() + "</h5>" + "<h5>" + bus2b.altDisplay() + "</h5>" + "<h5>" + bus3a.altDisplay() + "</h5>" + "<h5>" + bus3b.altDisplay() + "</h5>" + "<h5>" + bus4a.altDisplay() + "</h5>" + "<h5>" + bus4b.altDisplay() + "</h5>" + "<h5>" + bus5a.altDisplay() + "</h5>" + "<h5>" + bus5b.altDisplay() + "</h5>";

            listOutput.innerHTML += "<h5>" + train1a.altDisplay() + "</h5>" + "<h5>" + train1b.altDisplay() + "</h5>" + "<h5>" + train2a.altDisplay() + "</h5>" + "<h5>" + train2b.altDisplay() + "</h5>";

            listOutput.innerHTML += "<h5>" + subway1a.altDisplay() + "</h5>" + "<h5>" + subway1b.altDisplay() + "</h5>" + "<h5>" + subway2a.altDisplay() + "</h5>" + "<h5>" + subway2b.altDisplay() + "</h5>" + "<h5>" + subway3a.altDisplay() + "</h5>" + "<h5>" + subway3b.altDisplay() + "</h5>";

            listOutput.innerHTML += "<h5>" + tram1a.altDisplay() + "</h5>" + "<h5>" + tram1b.altDisplay() + "</h5>" + "<h5>" + tram2a.altDisplay() + "</h5>" + "<h5>" + tram2b.altDisplay() + "</h5>" + "<h5>" + tram3a.altDisplay() + "</h5>" + "<h5>" + tram3b.altDisplay() + "</h5>";



        })
    </script>
</body>
</html>