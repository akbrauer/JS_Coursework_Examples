<% layout('/layouts/boilerplate') %>
<div id="cluster-map"></div>
<h1>All Campgrounds</h1>
	<% for (let campground of campgrounds){ %>
	<div class="card mb-3">
		<div class="row">
			<div class="col-md-4">
				<% if(campground.images.length) { %>
				<img class='img-fluid' src="<%= campground.images[0].url %>" alt="Campground Image" crossorigin="anonymous">
				<% } else { %>
				<img class='img-fluid' src="https://res.cloudinary.com/dviijvxfy/image/upload/v1724524008/YelpCamp/lu2ow46ijg7mhvtzjrc7.jpg" alt="Campground Image" crossorigin="anonymous">
				<% } %>
			</div>
			<div class="col-md-8">
				<div class="card-body">
					<h5 class="card-title"><%= campground.title %></h5>
					<p class="card-text"><%= campground.description %></p>
					<p class="card-text">
						<small class="text-black-50"><%= campground.location %></small>
					</p>
					<a href="/campgrounds/<%= campground._id %>" class="btn btn-primary">View <%= campground.title %></a>
				</div>
			</div>
		</div>
	</div>
	<% } %>
	<script>
		const maptilerApiKey = '<%- process.env.MAPTILER_API_KEY %>';
		const campgrounds = { features: <%- JSON.stringify(campgrounds) %>}
	</script>
	<script src="/javascripts/clusterMap.js"></script>
